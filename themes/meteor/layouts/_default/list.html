{{ partial "header.html" . }}

<main>

 {{$scratch := newScratch}}
{{$totalWord := 0}}
{{ range (where .Site.Pages "Kind" "page" )}}
    {{$scratch.Add "total" .WordCount}}
{{ end }}

{{$totalWord = $scratch.Get "total" }}

共 {{ len (where .Site.RegularPages "Section" "posts") }} 篇文章， 总计 {{$totalWord}} 字

<div id="all-tags">
  {{- range $name, $taxonomy := .Site.Taxonomies.tags -}}
  <a href="/tags/{{ $name | urlize }}">#{{ $name }}<small>({{ .Count }})</small></a>&nbsp;&nbsp;&nbsp;
  {{- end -}}
</div>

{{ partial "heatmap.html" . }}

  {{ range (where .Data.Pages "Type" "in" site.Params.mainSections).GroupByDate "2006" -}}
  <h2 class="archive-title">{{ .Key }}</h2>
  <ul class="blog-posts">
    {{ range .Pages }}
    <li>
      <span>
        <time datetime="{{ .Date.Format " 2006-01-02 15:04:05 MST" }}">{{ .Date.Format "2006-01-02"}}</time>
      </span>
      <a href="{{ .RelPermalink }}">{{ .Title }}</a>
    </li>
    {{ end }}
  </ul>

  {{ end }}

</main>

{{ partial "footer.html" . }}